{"version":3,"sources":["scripts/main.js"],"names":["body","document","querySelector","insertAdjacentHTML","tableHead","tableBody","form","onFormSubmit","evt","preventDefault","allData","FormData","employeeName","get","employeeAge","employeeSalary","newEmployeeSalary","String","length","makeANotification","reset","type","title","description","setTimeout","remove","convertSalaryToNumber","salary","Number","slice","split","join","thIndex","onClick","e","target","tagName","cellNumber","cellIndex","sorted","rows","sort","rowA","rowB","cellA","cells","innerHTML","cellB","includes","localeCompare","append","reverse","onSelectedRow","selectedRow","closest","forEach","row","classList","add","onSelectedCell","selectedCell","text","innerText","input","createElement","value","select","focus","addEventListener","ev","code","blur"],"mappings":"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","file":"main.9019185b.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\r\n\r\nconst body = document.querySelector('body');\r\n\r\nbody.insertAdjacentHTML('beforeend',\r\n  `<form action=\"#\" method=\"get\"\r\n  class=\"new-employee-form\">\r\n  <label>Name: \r\n    <input \r\n    name=\"name\" \r\n    type=\"text\" \r\n    data-qa=\"name\" \r\n    maxlength=\"25\" \r\n    required>\r\n  </label>\r\n  <label>Position: \r\n    <input \r\n    name=\"position\" \r\n    type=\"text\" \r\n    data-qa=\"position\" \r\n    minlength=\"2\"\r\n    maxlength=\"25\" \r\n    required>\r\n  </label>\r\n   <label>Office:\r\n      <select \r\n        name=\"office\" \r\n        data-qa=\"office\"\r\n        required\r\n      >\r\n        <option value=\"Tokyo\">Tokyo</option>\r\n        <option value=\"Singapore\">Singapore</option>\r\n        <option value=\"London\">London</option>\r\n        <option value=\"New York\">New York</option>\r\n        <option value=\"Edinburgh\">Edinburgh</option>\r\n        <option value=\"San Francisco\">San Francisco</option>\r\n      </select>\r\n    </label>\r\n  <label>Age: \r\n    <input \r\n    name=\"age\" \r\n    type=\"number\" \r\n    data-qa=\"age\" \r\n    required>\r\n  </label>\r\n  <label>Salary: \r\n    <input \r\n    name=\"salary\" \r\n    type=\"number\" \r\n    data-qa=\"salary\" \r\n    min=\"0\" required>\r\n  </label>\r\n  <button type=\"submit\">Save to table</button>\r\n</form>`);\r\n\r\nconst tableHead = document.querySelector('thead');\r\nconst tableBody = document.querySelector('tbody');\r\nconst form = document.querySelector('form');\r\n\r\nfunction onFormSubmit(evt) {\r\n  evt.preventDefault();\r\n\r\n  const allData = new FormData(form);\r\n  const employeeName = allData.get('name');\r\n  const employeeAge = allData.get('age');\r\n  const employeeSalary = allData.get('salary');\r\n  const newEmployeeSalary = '$' + String(employeeSalary);\r\n\r\n  if (employeeName.length < 4) {\r\n    makeANotification('warning', 'Warning',\r\n      'Name field should has at least 4 charachers');\r\n  } else if (employeeAge < 18 || employeeAge > 90) {\r\n    makeANotification('error', 'Error', 'Please enter a valid age');\r\n  } else {\r\n    tableBody.insertAdjacentHTML('beforeend',\r\n      `<tr>\r\n          <td>${employeeName}</td>\r\n          <td>${allData.get('position')}</td>\r\n          <td>${allData.get('office')}</td>\r\n          <td>${employeeAge}</td>\r\n          <td>${newEmployeeSalary}</td>\r\n        </tr>`);\r\n    makeANotification('success', 'Success', 'Employee was added to the table');\r\n    form.reset();\r\n  };\r\n}\r\n\r\nfunction makeANotification(type, title, description) {\r\n  body.insertAdjacentHTML('beforeend', `\r\n  <div \r\n    class=\"notification ${type}\"\r\n    data-qa=\"notification\"\r\n  >\r\n    <h1 class=\"title\">\r\n      ${title}\r\n    </h1>\r\n    <p>\r\n      ${description}\r\n    </p>\r\n  </div\r\n`);\r\n\r\n  setTimeout(() => document.querySelector('.notification').remove(), 3000);\r\n}\r\n\r\nfunction convertSalaryToNumber(salary) {\r\n  return Number(salary.slice(1).split(',').join(''));\r\n};\r\n\r\nlet thIndex = -1;\r\n\r\nfunction onClick(e) {\r\n  if (e.target.tagName !== 'TH') {\r\n    return;\r\n  };\r\n\r\n  const cellNumber = e.target.cellIndex;\r\n  const sorted = [...tableBody.rows].sort((rowA, rowB) => {\r\n    let cellA = rowA.cells[cellNumber].innerHTML;\r\n    let cellB = rowB.cells[cellNumber].innerHTML;\r\n\r\n    if (cellA.includes('$')) {\r\n      cellA = convertSalaryToNumber(cellA);\r\n      cellB = convertSalaryToNumber(cellB);\r\n\r\n      return cellA - cellB;\r\n    }\r\n\r\n    return cellA.localeCompare(cellB);\r\n  });\r\n\r\n  if (thIndex === cellNumber) {\r\n    tableBody.append(...sorted.reverse());\r\n    thIndex = -1;\r\n  } else {\r\n    tableBody.append(...sorted);\r\n    thIndex = cellNumber;\r\n  }\r\n};\r\n\r\nfunction onSelectedRow(e) {\r\n  const selectedRow = e.target.closest('tr');\r\n\r\n  [...tableBody.rows].forEach(row => row.classList.remove('active'));\r\n  selectedRow.classList.add('active');\r\n}\r\n\r\nfunction onSelectedCell(e) {\r\n  const selectedCell = e.target.closest('td');\r\n\r\n  const text = selectedCell.innerText;\r\n\r\n  selectedCell.innerText = '';\r\n\r\n  let input = document.createElement('input');\r\n\r\n  input.classList.add('cell-input');\r\n  input.type = 'text';\r\n  input.value = text;\r\n\r\n  if (selectedCell.cellIndex === 2) {\r\n    const select = document.createElement('select');\r\n\r\n    select.insertAdjacentHTML('afterbegin', `\r\n      <option value=\"Tokyo\">Tokyo</option>\r\n      <option value=\"Singapore\">Singapore</option>\r\n      <option value=\"London\">London</option>\r\n      <option value=\"New York\">New York</option>\r\n      <option value=\"Edinburgh\">Edinburgh</option>\r\n      <option value=\"San Francisco\">San Francisco</option>\r\n      `);\r\n    input = select;\r\n  };\r\n\r\n  if (selectedCell.cellIndex === 3\r\n  || selectedCell.cellIndex === 4) {\r\n    input.type = 'number';\r\n  };\r\n\r\n  selectedCell.append(input);\r\n  input.focus();\r\n\r\n  input.addEventListener('blur', () => {\r\n    if (input.value === '') {\r\n      selectedCell.innerText = text;\r\n\r\n      return;\r\n    };\r\n\r\n    if (selectedCell.cellIndex === 0\r\n      && input.value.length < 4) {\r\n      selectedCell.innerText = text;\r\n\r\n      return;\r\n    };\r\n\r\n    if (input.value > 90 && selectedCell.cellIndex === 3) {\r\n      selectedCell.innerText = text;\r\n\r\n      return;\r\n    };\r\n\r\n    if (input.value < 18 && selectedCell.cellIndex === 3) {\r\n      selectedCell.innerText = text;\r\n\r\n      return;\r\n    };\r\n\r\n    if (selectedCell.cellIndex === 4) {\r\n      selectedCell.innerText = '$' + String(input.value);\r\n\r\n      return;\r\n    };\r\n\r\n    selectedCell.innerText = input.value;\r\n    input.remove();\r\n  });\r\n\r\n  input.addEventListener('keypress', (ev) => {\r\n    if (ev.code === 'Enter') {\r\n      input.blur();\r\n    }\r\n  });\r\n}\r\n\r\nform.addEventListener('submit', onFormSubmit);\r\ntableHead.addEventListener('click', onClick);\r\ntableBody.addEventListener('dblclick', onSelectedCell);\r\ntableBody.addEventListener('click', onSelectedRow);\r\n"]}